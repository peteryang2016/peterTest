<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
  <style>
    /*#userEmail{
      outline: none;
    }
    #userEmail:valid{!*通过验证*!
      border-color: green;
    }
    #userEmail:invalid{!*没通过验证*!
      border-color:red
    }
    #userEmail:invalid + span:after{
      content:'邮箱不符合格式'
    }
    #userEmail:valid + span:after{
      content:'邮箱格式正确'
    }*/
  </style>
</head>
<body>
邮箱：<input id="userEmail" type="email"><span id="spanEmail"></span>
<script>
  /*
  * blur:失去焦点
  * focus：获取焦点
  * */
  userEmail.onkeyup=userEmail.onblur = function () {
    //checkValidity:h5新提供的表单内容格式验证方法（新表单类型中有内置验证机制的，都可以基于这个方法验证）
    /*if(this.checkValidity()){
      spanEmail.innerHTML = 'ok';
    }else{
      spanEmail.innerHTML = 'no'
    }*/

    let val = this.value.trim();//去除首尾空格
    if(val.length===0){
      spanEmail.innerHTML = '必填项目'
      return;
    }
    let reg = /^\w+((-\w+)|(\.\w+))*@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/;
    if(!reg.test(val)){
      spanEmail.innerHTML = '不符合格式';
      return;
    }
    spanEmail.innerHTML = '邮箱输入正确'
  }
</script>
</body>
</html>
